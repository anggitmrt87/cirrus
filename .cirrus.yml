env:
  TZ: "Asia/Jakarta"
  LANG: "C.UTF-8"
  LC_ALL: "C"
  
  # ğŸ¯ Kernel Configuration
  DEVICE_CODENAME: "chime"
  BUILD_USER: "builder"
  BUILD_HOST: "mrtprojectâ„¢"
  KERNEL_SOURCE: "https://github.com/jomadeto/valeryn_xiaomi_sm6115"
  KERNEL_BRANCH: "16.0"
  DEVICE_DEFCONFIG: "vendor/chime-stock_defconfig"
  ANYKERNEL: "https://github.com/frstprjkt/AnyKernel3"
  ANYKERNEL_BRANCH: "lime"
  
  # ğŸ” Telegram Encrypted Secrets
  TG_TOKEN: "ENCRYPTED[d9185ab32fea60b59b9caac7865c156001691d0c6c87c825c32a3db288ed566a8ac07cfe7ff445fb2c0e61f57c06b486]"
  TG_CHAT_ID: "ENCRYPTED[d1175d4be5c2ebcb2ce25c91ec7c71abeb738d22d563c4fc0afdb9f528c2d6997b98e29309468198038eb159cc709e91]"

  # âš™ï¸ Toolchain Configuration
  USE_CLANG: "greenforce" # "aosp" or "greenforce"
  CLANG_ROOTDIR: "/tmp/cirrus-ci-build/clang"
  AOSP_CLANG_URL: "https://android.googlesource.com/platform/prebuilts/clang/host/linux-x86/+archive/refs/heads/android16-qpr2-release/clang-r574158.tar.gz"

  # ğŸ”§ Kernel Build Configuration
  TYPE_IMAGE: "Image.gz"
  BUILD_DTBO: "true"
  DISABLE_LOCALVERSION_ST: "true"
  INCLUDE_DTB: "true"
  DTB_PATH: "arch/arm64/boot/dts/vendor/qcom/bengal.dtb"

  # âš¡ Kernel SU configuration
  KERNELSU: "false"
  KERNELSU_TYPE: "backslashxx"
  KERNELSU_BRANCH: "master"
  KPM_PATCH: "false"
  KPM_VERSION: "0.12.0"

  # ğŸš€ Build Optimization
  BUILD_OPTIONS: "-j8"
  CCACHE: "true"
  CCACHE_DIR: "/tmp/ccache"
  CCACHE_MAXSIZE: "10G"
  CCACHE_COMPRESS: "true"
  
  # ğŸ“Š Enhanced Logging and Debugging
  DEBUG_MODE: "false"
  KEEP_BUILD_LOGS: "false"

task:
  name: "ğŸš€ Kernel Build Process"
  timeout_in: 3h
  container:
    image: mhmmdfdlyas/dockerfile:k-ubuntu
    cpu: 8
    memory: 32G

  # ğŸ’¾ Cache Configuration
  ccache_cache:
    folder: /tmp/ccache

  update_script:
    - echo "ğŸ”„ Updating System Packages..."
    - apt-get update -qq
    - apt-get install -y aria2 ccache libssl-dev ncurses-dev flex bison cpio xz-utils locales libtinfo5
    - echo "ğŸŒ Setting up locale..."
    - echo 'en_US.UTF-8 UTF-8' > /etc/locale.gen && /usr/sbin/locale-gen
    - echo "ğŸ• Setting timezone to $TZ..."
    - ln -snf /usr/share/zoneinfo/"$TZ" /etc/localtime && echo "$TZ" > /etc/timezone
    - apt-get clean
    - echo "âœ… System setup completed!"

  setup_script:
    - echo "ğŸ“ Creating directories..."
    - mkdir -p /tmp/ccache
    - ccache -M $CCACHE_MAXSIZE
    - ccache -z
    - echo "ğŸ”§ CCache configured (max: $CCACHE_MAXSIZE)"

  sync_script:
    - echo "ğŸ“¥ Starting source download..."
    - chmod +x download.sh
    - ./download.sh

  build_script:
    - echo "ğŸ”¨ Starting build process..."
    - chmod +x build.sh
    - ./build.sh

  cleanup_script:
    - echo "ğŸ§¹ Cleaning up build environment..."
    - chmod +x done.sh
    - ./done.sh
